# ‚úÖ AsyncTask –ú–∏–≥—Ä–∞—Ü–∏—è: –í—Ç–æ—Ä–æ–π –®–∞–≥ –ó–∞–≤–µ—Ä—à–µ–Ω!

**–î–∞—Ç–∞**: 24 –æ–∫—Ç—è–±—Ä—è 2025 –≥.
**–§–∞–π–ª**: `StationActions.java`
**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–û**

## üéØ **–ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ**

### **–ú–∏–≥—Ä–∞—Ü–∏—è StationActions.java**
- ‚úÖ –ó–∞–º–µ–Ω–∏–ª **3 AsyncTask** –Ω–∞ `AsyncExecutor.submitIOTask()`
- ‚úÖ –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ - IO (—Å–µ—Ç—å): –ø–æ–ª—É—á–µ–Ω–∏–µ URL —Å—Ç–∞–Ω—Ü–∏–∏, —à–∞—Ä–∏–Ω–≥, –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ

### **–ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**

#### 1. **`retrieveAndCopyStreamUrlToClipboard()`**
- **–§—É–Ω–∫—Ü–∏—è**: –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ URL —Å—Ç–∞–Ω—Ü–∏–∏ –∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
- **–°—Ç–∞—Ä–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**: AsyncTask —Å `doInBackground()` + `onPostExecute()`
- **–ù–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**: `AsyncExecutor.submitIOTask()` + `thenAccept()` + `exceptionally()`

#### 2. **`share()`**
- **–§—É–Ω–∫—Ü–∏—è**: –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ URL —Å—Ç–∞–Ω—Ü–∏–∏ –∏ –æ—Ç–∫—Ä—ã—Ç–∏–µ –¥–∏–∞–ª–æ–≥–∞ —à–∞—Ä–∏–Ω–≥–∞
- **–°—Ç–∞—Ä–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**: AsyncTask —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –∏ UI –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
- **–ù–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**: `AsyncExecutor.submitIOTask()` —Å `runOnMainThread()`

#### 3. **`vote()`**
- **–§—É–Ω–∫—Ü–∏—è**: –û—Ç–ø—Ä–∞–≤–∫–∞ –≥–æ–ª–æ—Å–∞ –∑–∞ —Å—Ç–∞–Ω—Ü–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- **–°—Ç–∞—Ä–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**: AsyncTask —Ç–æ–ª—å–∫–æ —Å `doInBackground()`
- **–ù–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**: `AsyncExecutor.submitIOTask()` —Å `exceptionally()`

## üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è**

### **–ë—ã–ª–æ (AsyncTask):**
```java
new AsyncTask<Void, Void, String>() {
    @Override
    protected String doInBackground(Void... params) {
        // IO –æ–ø–µ—Ä–∞—Ü–∏—è
        return Utils.getRealStationLink(httpClient, app, station.StationUuid);
    }

    @Override
    protected void onPostExecute(String result) {
        // UI –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
        updateUI(result);
    }
}.execute();
```

### **–°—Ç–∞–ª–æ (AsyncExecutor):**
```java
AsyncExecutor.submitIOTask(() -> {
    // IO –æ–ø–µ—Ä–∞—Ü–∏—è
    return Utils.getRealStationLink(httpClient, app, station.StationUuid);
}).thenAccept(result -> {
    // UI –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ –≥–ª–∞–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ
    AsyncExecutor.runOnMainThread(() -> updateUI(result));
}).exceptionally(throwable -> {
    // –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
    Log.e(TAG, "Error in task", throwable);
    return null;
});
```

## üìä **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã**

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| ‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è | –£—Å–ø–µ—à–Ω–∞ |
| ‚úÖ –°–±–æ—Ä–∫–∞ APK | –£—Å–ø–µ—à–Ω–∞ |
| ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π | 79 (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) |
| üìè –†–∞–∑–º–µ—Ä APK | 20.6 MB |
| üîÑ AsyncTask —Ñ–∞–π–ª–æ–≤ | 11 –æ—Å—Ç–∞–ª–æ—Å—å |

## üéØ **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏**

### **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –º–∏–≥—Ä–∞—Ü–∏–∏:**
1. **`FragmentSettings.java`** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∫—Å–∏ ‚≠ê **–†–µ–∫–æ–º–µ–Ω–¥—É—é —Å–ª–µ–¥—É—é—â–∏–π**
2. **`PlayStationTask.java`** - –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Å—Ç–∞–Ω—Ü–∏–∏
3. **`GetRealLinkAndPlayTask.java`** - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ

### **–ö—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–±–æ—Ä–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ñ–∞–π–ª–∞:**
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–∏** - —Ñ–∞–π–ª—ã —Å –æ–¥–Ω–∏–º AsyncTask
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** - —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å —Å–µ—Ç–µ–≤—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏

## üí° **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**

- ‚úÖ **–ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ** - –≤—Å–µ IO –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π API
- ‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ Activity/Fragment
- ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—É–ª—ã –ø–æ—Ç–æ–∫–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ **–û–±—Å–ª—É–∂–∏–≤–∞–µ–º–æ—Å—Ç—å** - —á–∏—Ç–∞–µ–º—ã–π –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–¥
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

## üìà **–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å –º–∏–≥—Ä–∞—Ü–∏–∏**

| –≠—Ç–∞–ø | –°—Ç–∞—Ç—É—Å | –§–∞–π–ª—ã | AsyncTask –æ–ø–µ—Ä–∞—Ü–∏–π |
|------|--------|-------|-------------------|
| 1 | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω | AlarmReceiver.java | 1 |
| 2 | ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω | StationActions.java | 3 |
| 3 | üîÑ –û–∂–∏–¥–∞–µ—Ç | FragmentSettings.java | 1 |
| ... | ... | ... | ... |
| –í—Å–µ–≥–æ | üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ | 13 —Ñ–∞–π–ª–æ–≤ | ~20 –æ–ø–µ—Ä–∞—Ü–∏–π |

---

**üéâ –í—Ç–æ—Ä–æ–π —ç—Ç–∞–ø –º–∏–≥—Ä–∞—Ü–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω! AsyncExecutor –¥–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–≤–æ—é —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ.**