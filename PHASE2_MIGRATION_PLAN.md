# üéØ –ü–õ–ê–ù –ú–ò–ì–†–ê–¶–ò–ò - –§–ê–ó–ê 2 (–í–ê–ñ–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø)

**–¶–µ–ª—å**: –£—Å—Ç—Ä–∞–Ω–∏—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è deprecated API –∏ code smells  
**–°—Ä–æ–∫–∏**: 2-3 –Ω–µ–¥–µ–ª–∏  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: üü† –°–†–ï–î–ù–ò–ô

**–°—Ç–∞—Ç—É—Å –§–∞–∑—ã 1:** ‚úÖ 100% –ó–ê–í–ï–†–®–ï–ù–ê –ò –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–ê

---

## üìä –ß–¢–û –û–°–¢–ê–õ–û–°–¨ –ò–ó –ê–ù–ê–õ–ò–ó–ê

### üü† **–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –ø—Ä–æ–±–ª–µ–º—ã:**

| –ü—Ä–æ–±–ª–µ–º–∞ | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –†–∏—Å–∫ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|----------|-----------|------|-----------|
| **AsyncTask –≤ UI** | 3 —Ñ–∞–π–ª–∞ (ActivityMain, FragmentHistory, FragmentBase) | üü† 30% | P1 |
| **Handler() –±–µ–∑ Looper** | 13 —Å–ª—É—á–∞–µ–≤ –≤ 9 —Ñ–∞–π–ª–∞—Ö | üü° 20% | P2 |
| **PagedList deprecated** | 4 —Ñ–∞–π–ª–∞ | üü† 30% | P1 |
| **static Context** | 99 —Å–ª—É—á–∞–µ–≤ –≤ 21 —Ñ–∞–π–ª–µ | üü° 40% | P2 |
| **LocalBroadcastManager** | –ú–Ω–æ–≥–æ –º–µ—Å—Ç | üü° 15% | P2 |
| **android.preference.PreferenceManager** | 2 –º–µ—Å—Ç–∞ | üü¢ 10% | P3 |

---

## üìã –ó–ê–î–ê–ß–ê 2.1: –û—Å—Ç–∞–≤—à–∏–µ—Å—è AsyncTask –≤ UI (3 —Ñ–∞–π–ª–∞)

### ‚ö†Ô∏è –û–¶–ï–ù–ö–ê –†–ò–°–ö–û–í

| –§–∞–π–ª | AsyncTask'–æ–≤ | –†–∏—Å–∫ | –ü—Ä–∏—á–∏–Ω–∞ |
|------|--------------|------|---------|
| **ActivityMain.java** | 2 | üü† 30% | UI search operations |
| **FragmentHistory.java** | 1 | üü° 20% | History loading |
| **FragmentBase.java** | 1 | üü° 20% | Generic fragment operations |
| **FragmentServerInfo.java** | 1 | üü¢ 10% | Server info display |

### üìù –ü–õ–ê–ù:

#### **2.1.1: ActivityMain.java (2 AsyncTask):**
- Line 603: Intent deep link handling
- Line 632: Voice search handling
**–í—Ä–µ–º—è:** 1-2 —á–∞—Å–∞  
**–†–∏—Å–∫:** üü† –°—Ä–µ–¥–Ω–∏–π (UI operations)

#### **2.1.2: FragmentHistory.java:**
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
**–í—Ä–µ–º—è:** 1 —á–∞—Å  
**–†–∏—Å–∫:** üü° –ù–∏–∑–∫–∏–π

#### **2.1.3: FragmentBase.java:**
- Generic async operations –¥–ª—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤
**–í—Ä–µ–º—è:** 1 —á–∞—Å  
**–†–∏—Å–∫:** üü° –ù–∏–∑–∫–∏–π

#### **2.1.4: FragmentServerInfo.java:**
- Server stats display
**–í—Ä–µ–º—è:** 30 –º–∏–Ω—É—Ç  
**–†–∏—Å–∫:** üü¢ –û—á–µ–Ω—å –Ω–∏–∑–∫–∏–π

---

## üìã –ó–ê–î–ê–ß–ê 2.2: Handler() ‚Üí Handler(Looper.getMainLooper())

### ‚ö†Ô∏è –û–¶–ï–ù–ö–ê –†–ò–°–ö–û–í

**–û–±—â–∏–π —Ä–∏—Å–∫:** üü° 20% (–ø—Ä–æ—Å—Ç–∞—è –∑–∞–º–µ–Ω–∞, –Ω–æ –º–Ω–æ–≥–æ –º–µ—Å—Ç)

### –§–∞–π–ª—ã –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (13 —Å–ª—É—á–∞–µ–≤ –≤ 9 —Ñ–∞–π–ª–∞—Ö):

| –§–∞–π–ª | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|------|-----------|-----------|
| NoNameRadioApp.java | 2 | P1 |
| ActivityMain.java | 4 | P1 |
| Utils.java | 1 | P2 |
| FragmentPlayerFull.java | 1 | P2 |
| PlayStationTask.java | 1 | P2 |
| PlayerSelectorAdapter.java | 1 | P3 |
| RefreshHandler.java | 1 | P3 |
| CustomFilter.java | 1 | P3 |
| UiHandler.java | 1 | P3 |

### üìù –ü–õ–ê–ù:

#### **2.2.1: –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Ñ–∞–π–ª—ã (NoNameRadioApp, ActivityMain):**
**–í—Ä–µ–º—è:** 30 –º–∏–Ω—É—Ç  
**–†–∏—Å–∫:** üü° 15%

#### **2.2.2: –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã:**
**–í—Ä–µ–º—è:** 1 —á–∞—Å  
**–†–∏—Å–∫:** üü¢ 10%

---

## üìã –ó–ê–î–ê–ß–ê 2.3: PagedList ‚Üí Paging 3

### ‚ö†Ô∏è –û–¶–ï–ù–ö–ê –†–ò–°–ö–û–í

**–û–±—â–∏–π —Ä–∏—Å–∫:** üü† 30% (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ)

### –§–∞–π–ª—ã –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ (4 —Ñ–∞–π–ª–∞):

| –§–∞–π–ª | –¢–∏–ø | –†–∏—Å–∫ |
|------|-----|------|
| **TrackHistoryRepository.java** | Data layer | üü† 30% |
| **TrackHistoryViewModel.java** | ViewModel | üü† 25% |
| **TrackHistoryAdapter.java** | RecyclerView Adapter | üü† 35% |
| **FragmentPlayerFull.java** | Observer usage | üü° 20% |

### üìù –ü–õ–ê–ù:

#### **–ú–∏–≥—Ä–∞—Ü–∏—è Paging 2 ‚Üí Paging 3:**

```kotlin
// –î–û (Paging 2):
LivePagedListBuilder<Int, TrackHistoryEntry>(
    dataSource.factory,
    PagedList.Config.Builder()
        .setPageSize(50)
        .build()
).build()

// –ü–û–°–õ–ï (Paging 3):
Pager(
    config = PagingConfig(pageSize = 50),
    pagingSourceFactory = { TrackHistoryPagingSource(dao) }
).flow.cachedIn(viewModelScope)
```

**–í—Ä–µ–º—è:** 3-4 —á–∞—Å–∞  
**–†–∏—Å–∫:** üü† –°—Ä–µ–¥–Ω–∏–π (—Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ Repository/ViewModel/Adapter)

---

## üìã –ó–ê–î–ê–ß–ê 2.4: LocalBroadcastManager ‚Üí EventBus (–æ—Å—Ç–∞–≤—à–∏–µ—Å—è –º–µ—Å—Ç–∞)

### –û—Å—Ç–∞–≤—à–∏–µ—Å—è —Ñ–∞–π–ª—ã:
- FragmentPlayerSmall.java (2 –º–µ—Å—Ç–∞)
- FragmentPlayerFull.java (2 –º–µ—Å—Ç–∞)
- PlayerSelectorDialog.java (2 –º–µ—Å—Ç–∞)
- FragmentBase.java (1 –º–µ—Å—Ç–æ)
- FragmentServerInfo.java (1 –º–µ—Å—Ç–æ)
- ItemAdapterStation.java (1 –º–µ—Å—Ç–æ)

**–í—Ä–µ–º—è:** 2-3 —á–∞—Å–∞  
**–†–∏—Å–∫:** üü° 20%

---

## üìã –ó–ê–î–ê–ß–ê 2.5: android.preference.PreferenceManager ‚Üí androidx

### –§–∞–π–ª—ã:
- RadioAlarmManager.java (2 –º–µ—Å—Ç–∞)

**–í—Ä–µ–º—è:** 15 –º–∏–Ω—É—Ç  
**–†–∏—Å–∫:** üü¢ 5%

---

## üìä –û–¶–ï–ù–ö–ê –í–†–ï–ú–ï–ù–ò –§–ê–ó–´ 2

| –ó–∞–¥–∞—á–∞ | –û—Ü–µ–Ω–∫–∞ | –†–∏—Å–∫ |
|--------|--------|------|
| 2.1 –û—Å—Ç–∞–≤—à–∏–µ—Å—è AsyncTask | 3-4 —á–∞—Å–∞ | üü† |
| 2.2 Handler() fix | 1.5 —á–∞—Å–∞ | üü° |
| 2.3 Paging 2 ‚Üí 3 | 3-4 —á–∞—Å–∞ | üü† |
| 2.4 LocalBroadcastManager | 2-3 —á–∞—Å–∞ | üü° |
| 2.5 PreferenceManager | 15 –º–∏–Ω—É—Ç | üü¢ |
| **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞** | **10-13 —á–∞—Å–æ–≤** | |
| **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** | **5-8 —á–∞—Å–æ–≤** | |
| **–ò–¢–û–ì–û** | **15-21 —á–∞—Å** (2-3 –¥–Ω—è) | |

---

## üéØ –ü–û–†–Ø–î–û–ö –í–´–ü–û–õ–ù–ï–ù–ò–Ø (–û–¢ –ü–†–û–°–¢–û–ì–û –ö –°–õ–û–ñ–ù–û–ú–£)

### –î–µ–Ω—å 1:
1. ‚úÖ PreferenceManager ‚Üí androidx (15 –º–∏–Ω, —Ä–∏—Å–∫ 5%)
2. ‚úÖ Handler() fixes (1.5 —á–∞—Å–∞, —Ä–∏—Å–∫ 20%)
3. ‚úÖ FragmentServerInfo AsyncTask (30 –º–∏–Ω, —Ä–∏—Å–∫ 10%)
4. ‚úÖ FragmentBase AsyncTask (1 —á–∞—Å, —Ä–∏—Å–∫ 20%)

### –î–µ–Ω—å 2:
5. ‚úÖ FragmentHistory AsyncTask (1 —á–∞—Å, —Ä–∏—Å–∫ 20%)
6. ‚úÖ ActivityMain AsyncTask (2 —á–∞—Å–∞, —Ä–∏—Å–∫ 30%)
7. ‚úÖ LocalBroadcastManager ‚Üí EventBus (2-3 —á–∞—Å–∞, —Ä–∏—Å–∫ 20%)

### –î–µ–Ω—å 3:
8. ‚úÖ Paging 2 ‚Üí Paging 3 (3-4 —á–∞—Å–∞, —Ä–∏—Å–∫ 30%)
9. ‚úÖ –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## ‚úÖ –ö–†–ò–¢–ï–†–ò–ò –ó–ê–í–ï–†–®–ï–ù–ò–Ø –§–ê–ó–´ 2

- [ ] –í—Å–µ AsyncTask –∑–∞–º–µ–Ω–µ–Ω—ã (100%)
- [ ] –í—Å–µ Handler() —Å —è–≤–Ω—ã–º Looper
- [ ] Paging 3 –≤–º–µ—Å—Ç–æ PagedList
- [ ] LocalBroadcastManager –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω
- [ ] androidx.preference –≤–º–µ—Å—Ç–æ android.preference
- [ ] ‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è –±–µ–∑ errors
- [ ] ‚úÖ Unit —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- [ ] ‚úÖ –ù–µ—Ç deprecated warnings –¥–ª—è –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

## üöÄ –ì–û–¢–û–í –ù–ê–ß–ê–¢–¨ –§–ê–ó–£ 2?

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- üéØ –ï—â–µ –±–æ–ª—å—à–µ deprecated API —É—Å—Ç—Ä–∞–Ω–µ–Ω–æ
- üéØ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π Paging 3 –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–µ–∫–æ–≤
- üéØ –ü–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ EventBus
- üéØ Thread-safe Handler'—ã

**–†–∏—Å–∫–∏:**
- ‚ö†Ô∏è –§–∞–∑–∞ 2 –º–µ–Ω–µ–µ –∫—Ä–∏—Ç–∏—á–Ω–∞ —á–µ–º –§–∞–∑–∞ 1
- ‚ö†Ô∏è –ú–æ–∂–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –Ω–∞ –§–∞–∑–µ 1 (—É–∂–µ –±–æ–ª—å—à–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å)
- ‚ö†Ô∏è –ü–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –µ—â–µ 2-3 –¥–Ω—è —Ä–∞–±–æ—Ç—ã

**–†–µ–∫–æ–º–µ–Ω–¥—É—é –Ω–∞—á–∞—Ç—å —Å —Å–∞–º—ã—Ö –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á:**
1. PreferenceManager (5% —Ä–∏—Å–∫)
2. Handler() fixes (20% —Ä–∏—Å–∫)
3. –ü—Ä–æ—Å—Ç—ã–µ AsyncTask

