# ‚ö†Ô∏è –ê–ù–ê–õ–ò–ó –†–ò–°–ö–û–í: LocalBroadcastManager ‚Üí EventBus

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞**: 12 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å**: –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π  
**–û—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–∞**: üü° **–°–†–ï–î–ù–ò–ô-–í–´–°–û–ö–ò–ô** (—Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å)

---

## üìä –ú–ê–°–®–¢–ê–ë –ú–ò–ì–†–ê–¶–ò–ò

### –§–∞–π–ª—ã –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ (11 —Ñ–∞–π–ª–æ–≤)
| ‚Ññ | –§–∞–π–ª | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –†–∏—Å–∫ |
|---|------|---------------|------|
| 1 | **PlayerService.java** | –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å —Å–æ–±—ã—Ç–∏–π (SENDER) | üî¥ –í–´–°–û–ö–ò–ô |
| 2 | FragmentPlayerFull.java | –ü–æ–ª—É—á–∞—Ç–µ–ª—å: TIMER + META + STATE | üü° –°–†–ï–î–ù–ò–ô |
| 3 | FragmentPlayerSmall.java | –ü–æ–ª—É—á–∞—Ç–µ–ª—å: META + STATE | üü° –°–†–ï–î–ù–ò–ô |
| 4 | NoNameRadioBrowserService.java | –°–µ—Ä–≤–∏—Å (Android Auto) | üî¥ –í–´–°–û–ö–ò–ô |
| 5 | FragmentStations.java | UI —Å–ø–∏—Å–æ–∫ —Å—Ç–∞–Ω—Ü–∏–π | üü¢ –ù–ò–ó–ö–ò–ô |
| 6 | MediaControllerHelper.java | –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä MediaSession | üî¥ –í–´–°–û–ö–ò–ô |
| 7 | MediaSessionManager.java | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ MediaSession | üî¥ –í–´–°–û–ö–ò–ô |
| 8 | StationActions.java | –î–µ–π—Å—Ç–≤–∏—è —Å–æ —Å—Ç–∞–Ω—Ü–∏—è–º–∏ | üü¢ –ù–ò–ó–ö–ò–ô |
| 9 | ItemAdapterStation.java | Adapter –¥–ª—è —Å–ø–∏—Å–∫–∞ —Å—Ç–∞–Ω—Ü–∏–π | üü¢ –ù–ò–ó–ö–ò–ô |
| 10 | PlayerSelectorDialog.java | –î–∏–∞–ª–æ–≥ –≤—ã–±–æ—Ä–∞ –ø–ª–µ–µ—Ä–∞ | üü¢ –ù–ò–ó–ö–ò–ô |
| 11 | BroadcastReceiverManager.java | –ú–µ–Ω–µ–¥–∂–µ—Ä receivers | üî¥ –í–´–°–û–ö–ò–ô |
| 12 | PlayerServiceUtil.java | –£—Ç–∏–ª–∏—Ç—ã —Å–µ—Ä–≤–∏—Å–∞ | üü° –°–†–ï–î–ù–ò–ô |

### –ù–ï –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å (System BroadcastReceivers)
- ‚ùå HeadsetConnectionReceiver.java - —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è headset
- ‚ùå BecomingNoisyReceiver.java - —Å–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ audio becoming noisy
- ‚ùå AlarmReceiver.java - —Å–∏—Å—Ç–µ–º–Ω—ã–π alarm
- ‚ùå AlarmSetupReceiver.java - —Å–∏—Å—Ç–µ–º–Ω—ã–π alarm setup
- ‚ùå BootReceiver.java - —Å–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ BOOT_COMPLETED

---

## üéØ –°–û–ë–´–¢–ò–Ø –î–õ–Ø –ú–ò–ì–†–ê–¶–ò–ò

### –¢–µ–∫—É—â–∏–µ LocalBroadcast —Å–æ–±—ã—Ç–∏—è
```java
// PlayerService.java
PLAYER_SERVICE_TIMER_UPDATE = "com.nonameradio.app.timerupdate"
PLAYER_SERVICE_META_UPDATE = "com.nonameradio.app.metaupdate"
PLAYER_SERVICE_STATE_CHANGE = "com.nonameradio.app.statechange"
PLAYER_SERVICE_BOUND = "com.nonameradio.app.playerservicebound"

// ActivityMain.java
ACTION_SHOW_LOADING = "com.nonameradio.app.show_loading"
ACTION_HIDE_LOADING = "com.nonameradio.app.hide_loading"
ACTION_PLAYER_STATE_CHANGED = "com.nonameradio.app.player_state_changed"
```

### –ù–æ–≤—ã–µ EventBus —Å–æ–±—ã—Ç–∏—è (–Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å)
```java
‚úÖ ShowLoadingEvent - –£–ñ–ï –°–û–ó–î–ê–ù
‚úÖ HideLoadingEvent - –£–ñ–ï –°–û–ó–î–ê–ù
‚úÖ PlayerStateChangeEvent - –£–ñ–ï –°–û–ó–î–ê–ù
‚úÖ MeteredConnectionEvent - –£–ñ–ï –°–û–ó–î–ê–ù
‚úÖ MediaSessionUpdateEvent - –£–ñ–ï –°–û–ó–î–ê–ù

üÜï TimerUpdateEvent - –ù–£–ñ–ù–û –°–û–ó–î–ê–¢–¨
üÜï MetaUpdateEvent - –ù–£–ñ–ù–û –°–û–ó–î–ê–¢–¨
üÜï PlayerServiceBoundEvent - –ù–£–ñ–ù–û –°–û–ó–î–ê–¢–¨ (–≤–æ–∑–º–æ–∂–Ω–æ –Ω–µ –Ω—É–∂–µ–Ω)
```

---

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –†–ò–°–ö–ò

### üî¥ –†–ò–°–ö 1: PlayerService - —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
**–ü—Ä–æ–±–ª–µ–º–∞**:
- PlayerService –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏—è –≤ 4+ –º–µ—Å—Ç–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è playback control
- –û—à–∏–±–∫–∞ –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å –≤–µ—Å—å playback

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å backup branch
2. ‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ (—Å–Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª–∏, –ø–æ—Ç–æ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–∏)
3. ‚úÖ –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
4. ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç–∞—Ä—ã–π –∫–æ–¥ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º

---

### üî¥ –†–ò–°–ö 2: MediaSession –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
**–ü—Ä–æ–±–ª–µ–º–∞**:
- MediaControllerHelper –∏ MediaSessionManager –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∞–Ω—ã
- –û—à–∏–±–∫–∞ –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å Android Auto / Bluetooth control
- Notification —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —ç—Ç–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
1. ‚úÖ –ò–∑—É—á–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
2. ‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å MediaControllerHelper –∏ MediaSessionManager –≤–º–µ—Å—Ç–µ
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å notification –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

---

### üü° –†–ò–°–ö 3: –¢–∞–π–º–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (PLAYER_SERVICE_TIMER_UPDATE)
**–ü—Ä–æ–±–ª–µ–º–∞**:
- –°–æ–±—ã—Ç–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ—á–µ–Ω—å —á–∞—Å—Ç–æ (–∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É)
- EventBus –º–æ–∂–µ—Ç –Ω–µ —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è —Å —á–∞—Å—Ç—ã–º–∏ —Å–æ–±—ã—Ç–∏—è–º–∏
- –ú–æ–∂–µ—Ç –±—ã—Ç—å performance issue

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å EventBus —Å —á–∞—Å—Ç—ã–º–∏ —Å–æ–±—ã—Ç–∏—è–º–∏
2. ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ, –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–∞–π–º–µ—Ä –Ω–∞ LocalBroadcastManager
3. ‚úÖ –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å throttling –≤ EventBus

---

### üü° –†–ò–°–ö 4: Fragment lifecycle
**–ü—Ä–æ–±–ª–µ–º–∞**:
- FragmentPlayerFull –∏ FragmentPlayerSmall —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç receivers –≤ onResume/onPause
- EventBus register/unregister –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –º–µ—Å—Ç–µ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å memory leaks

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
1. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å getViewLifecycleOwner() –¥–ª—è Fragment observers
2. ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å EventBus –≤ onViewCreated/onDestroyView
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ leaks –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

---

### üü° –†–ò–°–ö 5: BroadcastReceiverManager
**–ü—Ä–æ–±–ª–µ–º–∞**:
- –≠—Ç–æ—Ç –∫–ª–∞—Å—Å —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º–∏ BroadcastReceivers
- –ù–µ—è—Å–Ω–∞ –µ–≥–æ —Ä–æ–ª—å –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ú–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
1. ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ –∏–∑—É—á–∏—Ç—å —ç—Ç–æ—Ç –∫–ª–∞—Å—Å –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
2. ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ, –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å –∏–ª–∏ refactor –ø–æ–ª–Ω–æ—Å—Ç—å—é

---

## üìã –ü–õ–ê–ù –ú–ò–ì–†–ê–¶–ò–ò (–ø–æ—ç—Ç–∞–ø–Ω—ã–π)

### –§–ê–ó–ê 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–ë–ï–ó–û–ü–ê–°–ù–û)
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å backup branch `backup-before-localbroadcast-migration`
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ EventBus —Å–æ–±—ã—Ç–∏—è:
   - TimerUpdateEvent.java
   - MetaUpdateEvent.java
3. ‚úÖ –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π
4. ‚úÖ Commit: "feat: Add EventBus events for LocalBroadcastManager migration"

**–†–∏—Å–∫**: üü¢ –ú–ò–ù–ò–ú–ê–õ–¨–ù–´–ô (—Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤)

---

### –§–ê–ó–ê 2: UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–ù–ò–ó–ö–ò–ô –†–ò–°–ö)
**–ü–æ—Ä—è–¥–æ–∫ –º–∏–≥—Ä–∞—Ü–∏–∏**:
1. ‚úÖ StationActions.java (–ø—Ä–æ—Å—Ç–æ–π)
2. ‚úÖ ItemAdapterStation.java (adapter)
3. ‚úÖ PlayerSelectorDialog.java (dialog)
4. ‚úÖ FragmentStations.java (—Å–ø–∏—Å–æ–∫)

**–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞**:
- ‚úÖ Compile
- ‚úÖ Run app
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å UI

**–†–∏—Å–∫**: üü¢ –ù–ò–ó–ö–ò–ô (–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)

---

### –§–ê–ó–ê 3: –ü–æ–ª—É—á–∞—Ç–µ–ª–∏ –≤ Fragment (–°–†–ï–î–ù–ò–ô –†–ò–°–ö)
**–ü–æ—Ä—è–¥–æ–∫ –º–∏–≥—Ä–∞—Ü–∏–∏**:
1. ‚úÖ FragmentPlayerSmall.java (–ø–æ–ª—É—á–∞—Ç–µ–ª—å META + STATE)
2. ‚úÖ FragmentPlayerFull.java (–ø–æ–ª—É—á–∞—Ç–µ–ª—å TIMER + META + STATE)

**–ö—Ä–∏—Ç–∏—á–Ω–æ**:
- ‚ùó –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ViewLifecycleOwner
- ‚ùó –ü—Ä–æ–≤–µ—Ä–∏—Ç—å register/unregister –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
- ‚ùó –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ memory leaks

**–ü–æ—Å–ª–µ –ö–ê–ñ–î–û–ì–û —Ñ–∞–π–ª–∞**:
- ‚úÖ Compile
- ‚úÖ Run app
- ‚úÖ –û—Ç–∫—Ä—ã—Ç—å Player (Small –∏ Full)
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å—Ç–∞–Ω—Ü–∏—é
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ç–∞–π–º–µ—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ metadata –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

**–†–∏—Å–∫**: üü° –°–†–ï–î–ù–ò–ô (core UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)

---

### –§–ê–ó–ê 4: MediaSession –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–í–´–°–û–ö–ò–ô –†–ò–°–ö)
**–ü–æ—Ä—è–¥–æ–∫ –º–∏–≥—Ä–∞—Ü–∏–∏** (–≤–º–µ—Å—Ç–µ!):
1. ‚ö†Ô∏è MediaSessionManager.java
2. ‚ö†Ô∏è MediaControllerHelper.java
3. ‚ö†Ô∏è NoNameRadioBrowserService.java (Android Auto)

**–ö—Ä–∏—Ç–∏—á–Ω–æ**:
- ‚ùó –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –í–°–ï –¢–†–ò –§–ê–ô–õ–ê –≤–º–µ—Å—Ç–µ –≤ –æ–¥–Ω–æ–º –∫–æ–º–º–∏—Ç–µ
- ‚ùó –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Android Auto (–µ—Å–ª–∏ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å)
- ‚ùó –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Bluetooth control
- ‚ùó –ü—Ä–æ–≤–µ—Ä–∏—Ç—å notification controls

**–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏**:
- ‚úÖ Compile
- ‚úÖ Run app
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å—Ç–∞–Ω—Ü–∏—é
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å notification
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–Ω–æ–ø–∫–∏ –≤ notification
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Bluetooth headset control (–µ—Å–ª–∏ –µ—Å—Ç—å)

**–†–∏—Å–∫**: üî¥ –í–´–°–û–ö–ò–ô (–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–ª—è playback control)

---

### –§–ê–ó–ê 5: –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–∏ (–û–ß–ï–ù–¨ –í–´–°–û–ö–ò–ô –†–ò–°–ö)
**–§–∞–π–ª—ã**:
1. ‚ö†Ô∏è‚ö†Ô∏è PlayerService.java (SENDER –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π)
2. ‚ö†Ô∏è PlayerServiceUtil.java

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è**:
- ‚ùó –ó–∞–º–µ–Ω–∏—Ç—å sendBroadcast() –Ω–∞ EventBus.post()
- ‚ùó –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç–∞—Ä—ã–π –∫–æ–¥ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º
- ‚ùó –î–æ–±–∞–≤–∏—Ç—å extensive logging

**–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏**:
- ‚úÖ Compile
- ‚úÖ Run FULL regression test:
  - –ó–∞–ø—É—Å–∫ —Å—Ç–∞–Ω—Ü–∏–∏
  - –ü–∞—É–∑–∞/Resume
  - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∞–Ω—Ü–∏–π
  - –¢–∞–π–º–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
  - Metadata –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
  - Notification —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
  - Bluetooth control

**–†–∏—Å–∫**: üî¥üî¥ –û–ß–ï–ù–¨ –í–´–°–û–ö–ò–ô (—Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç)

---

### –§–ê–ó–ê 6: BroadcastReceiverManager (–ù–ï–Ø–°–ù–´–ô –†–ò–°–ö)
**–§–∞–π–ª—ã**:
1. ‚ùì BroadcastReceiverManager.java

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è**:
1. ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ –∏–∑—É—á–∏—Ç—å —ç—Ç–æ—Ç –∫–ª–∞—Å—Å
2. ‚úÖ –ü–æ–Ω—è—Ç—å –µ–≥–æ —Ä–æ–ª—å
3. ‚úÖ –†–µ—à–∏—Ç—å: –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å

**–†–∏—Å–∫**: ‚ùì –ù–ï–Ø–°–ù–´–ô (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–Ω–∞–ª–∏–∑)

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —Ñ–∞–∑—ã
```
‚úÖ Compile: ./gradlew :NoNameRadio:app:compileFreeDebugJavaWithJavac
‚úÖ Build APK: ./gradlew :NoNameRadio:app:assembleFreeDebug
‚úÖ Install: adb install -r <apk>
‚úÖ Launch: adb shell am start -n com.nonameradio.app.debug/...
‚úÖ Check logs: adb logcat -d | grep -E "NoNameRadio|FATAL"
```

### –†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø–æ—Å–ª–µ –§–∞–∑—ã 5)
```
‚úÖ –ó–∞–ø—É—Å–∫ —Å—Ç–∞–Ω—Ü–∏–∏ - —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ –ü–∞—É–∑–∞ - —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ Resume - —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∞–Ω—Ü–∏–π - —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ –¢–∞–π–º–µ—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è - —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ Metadata –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è - —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ Notification –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è - —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ Notification controls - —Ä–∞–±–æ—Ç–∞—é—Ç
‚úÖ Bluetooth control - —Ä–∞–±–æ—Ç–∞–µ—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å)
‚úÖ Android Auto - —Ä–∞–±–æ—Ç–∞–µ—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å)
```

---

## ‚è±Ô∏è –û–¶–ï–ù–ö–ê –í–†–ï–ú–ï–ù–ò

| –§–∞–∑–∞ | –í—Ä–µ–º—è | –†–∏—Å–∫ |
|------|-------|------|
| –§–∞–∑–∞ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ | 15 –º–∏–Ω | üü¢ |
| –§–∞–∑–∞ 2: UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã | 30 –º–∏–Ω | üü¢ |
| –§–∞–∑–∞ 3: Fragment –ø–æ–ª—É—á–∞—Ç–µ–ª–∏ | 45 –º–∏–Ω | üü° |
| –§–∞–∑–∞ 4: MediaSession | 1 —á–∞—Å | üî¥ |
| –§–∞–∑–∞ 5: –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–∏ (PlayerService) | 1 —á–∞—Å | üî¥üî¥ |
| –§–∞–∑–∞ 6: BroadcastReceiverManager | 30 –º–∏–Ω | ‚ùì |
| **–ò–¢–û–ì–û** | **~4 —á–∞—Å–∞** | üü° |

---

## üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### ‚úÖ –î–û –Ω–∞—á–∞–ª–∞ –º–∏–≥—Ä–∞—Ü–∏–∏
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å backup branch
2. ‚úÖ –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Ç–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
3. ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å APK —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

### ‚úÖ –í–û –í–†–ï–ú–Ø –º–∏–≥—Ä–∞—Ü–∏–∏
1. ‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ—ç—Ç–∞–ø–Ω–æ (–Ω–µ –≤—Å–µ —Å—Ä–∞–∑—É)
2. ‚úÖ –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞ - compile + test
3. ‚úÖ –ö–æ–º–º–∏—Ç–∏—Ç—å —á–∞—Å—Ç–æ (–∫–∞–∂–¥—ã–π —Ñ–∞–π–ª –∏–ª–∏ –º–∞–ª–µ–Ω—å–∫—É—é –≥—Ä—É–ø–ø—É)
4. ‚úÖ –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Å—Ç–∞—Ä—ã–π –∫–æ–¥ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º
5. ‚úÖ –î–æ–±–∞–≤–ª—è—Ç—å logging –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### ‚úÖ –ü–û–°–õ–ï –º–∏–≥—Ä–∞—Ü–∏–∏
1. ‚úÖ –ü–æ–ª–Ω–æ–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å memory leaks (Android Profiler)
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å performance (—Ç–∞–π–º–µ—Ä –Ω–µ –¥–æ–ª–∂–µ–Ω –ª–∞–≥–∞—Ç—å)
4. ‚úÖ –°–æ–∑–¥–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç

---

## üö® –ö–†–ò–¢–ï–†–ò–ò –û–¢–ö–ê–¢–ê

**–û—Ç–∫–∞—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –µ—Å–ª–∏**:
- ‚ùå Playback –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ùå –¢–∞–π–º–µ—Ä –ª–∞–≥–∞–µ—Ç –∏–ª–∏ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- ‚ùå Metadata –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- ‚ùå Notification –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
- ‚ùå Notification controls –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚ùå –ï—Å—Ç—å crashes –∏–ª–∏ FATAL errors
- ‚ùå –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã memory leaks

**–ö–∞–∫ –æ—Ç–∫–∞—Ç–∏—Ç—å**:
```bash
git reset --hard backup-before-localbroadcast-migration
```

---

## üéØ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–ú–∏–≥—Ä–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–∞, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç**:
- ‚ö†Ô∏è –û—á–µ–Ω—å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞
- ‚ö†Ô∏è –ü–æ—ç—Ç–∞–ø–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚ö†Ô∏è Extensive —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞
- ‚ö†Ô∏è –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –æ—Ç–∫–∞—Ç—É

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –≤ **6 —Ñ–∞–∑**, –Ω–∞—á–∏–Ω–∞—è —Å —Å–∞–º—ã—Ö –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (UI) –∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞—è —Å–∞–º—ã–º–∏ —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω—ã–º–∏ (PlayerService).

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞**: –û—Å—Ç–∞–≤–∏—Ç—å LocalBroadcastManager –∫–∞–∫ –µ—Å—Ç—å, —Ç–∞–∫ –∫–∞–∫:
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ LocalBroadcastManager –Ω–µ deprecated
- ‚úÖ Android –µ–≥–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç

---

**–í–µ—Ä—Å–∏—è**: 1.0  
**–ê–≤—Ç–æ—Ä**: AI Assistant  
**–î–∞—Ç–∞**: 12 –æ–∫—Ç—è–±—Ä—è 2025, 15:35

