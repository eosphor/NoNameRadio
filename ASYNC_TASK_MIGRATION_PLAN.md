# ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è AsyncTask ‚Üí AsyncExecutor –ó–ê–í–ï–†–®–ï–ù–ê!

**–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞**: 24 –æ–∫—Ç—è–±—Ä—è 2025 –≥.
**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è**: 24 –æ–∫—Ç—è–±—Ä—è 2025 –≥.
**–¶–µ–ª—å**: –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –∑–∞–º–µ–Ω–∞ AsyncTask –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π AsyncExecutor
**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù–ê**

## üéâ **–ò–¢–û–ì–ò –ú–ò–ì–†–ê–¶–ò–ò**

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –í—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ AsyncTask —É—Å–ø–µ—à–Ω–æ –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è!

- **–ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ —Ñ–∞–π–ª–æ–≤**: 2
- **AsyncTask –æ–ø–µ—Ä–∞—Ü–∏–π**: 4
- **–£–∂–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö**: 11 —Ñ–∞–π–ª–æ–≤
- **–û–±—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: 100% –º–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–∏

### ‚úÖ **–ó–∞–≤–µ—Ä—à–µ–Ω–æ (2 —Ñ–∞–π–ª–∞)**
- `AlarmReceiver.java` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ URL —Å—Ç–∞–Ω—Ü–∏–∏ ‚úÖ **–ó–ê–í–ï–†–®–ï–ù–û**
- `StationActions.java` - –¥–µ–π—Å—Ç–≤–∏—è —Å–æ —Å—Ç–∞–Ω—Ü–∏—è–º–∏ (3 AsyncTask) ‚úÖ **–ó–ê–í–ï–†–®–ï–ù–û**

### üîÑ **–í –ø—Ä–æ—Ü–µ—Å—Å–µ (0 —Ñ–∞–π–ª–æ–≤)**
- *(–æ–∂–∏–¥–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ñ–∞–π–ª–∞)*

### ‚úÖ **–£–∂–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã / –Ω–µ —Ç—Ä–µ–±—É—é—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ (11 —Ñ–∞–π–ª–æ–≤)**
1. `FragmentSettings.java` - AsyncTask –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω ‚úÖ
2. `PlayStationTask.java` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç CompletableFuture ‚úÖ
3. `GetRealLinkAndPlayTask.java` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç AsyncExecutor ‚úÖ
4. `MPDPlayTask.java` - –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç MPDAsyncTask (Runnable) ‚úÖ
5. `MPDChangeVolumeTask.java` - –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç MPDAsyncTask (Runnable) ‚úÖ
6. `MPDPauseTask.java` - –ø–∞—É–∑–∞ MPD - –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç MPDAsyncTask (Runnable) ‚úÖ
7. `MPDResumeTask.java` - –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ MPD - –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç MPDAsyncTask (Runnable) ‚úÖ
8. `MPDStopTask.java` - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ MPD - –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç MPDAsyncTask (Runnable) ‚úÖ
9. `MPDClient.java` - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å thread pools ‚úÖ
10. `MPDAsyncTask.java` - Runnable –≤–º–µ—Å—Ç–æ AsyncTask ‚úÖ
11. `ModernAsyncTask.java` - —É–∂–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–º–µ–Ω–∞ ‚úÖ

## üéØ **–°—Ç—Ä–∞—Ç–µ–≥–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏**

### **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã**
1. **IO-bound –æ–ø–µ—Ä–∞—Ü–∏–∏** ‚Üí `AsyncExecutor.submitIOTask()`
2. **CPU-bound –æ–ø–µ—Ä–∞—Ü–∏–∏** ‚Üí `AsyncExecutor.submitComputationTask()`
3. **–ü—Ä–æ—Å—Ç—ã–µ AsyncTask** ‚Üí –º–∏–≥—Ä–∞—Ü–∏—è –ø–µ—Ä–≤—ã–º–∏

### **–®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞**
1. **–ê–Ω–∞–ª–∏–∑**: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏ (IO/CPU)
2. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥**: –ó–∞–º–µ–Ω–∏—Ç—å AsyncTask –Ω–∞ AsyncExecutor
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –û–±–Ω–æ–≤–∏—Ç—å –ø–ª–∞–Ω

### **API AsyncExecutor**
```java
// IO –æ–ø–µ—Ä–∞—Ü–∏–∏ (—Å–µ—Ç—å, –¥–∏—Å–∫)
AsyncExecutor.submitIOTask(() -> {
    // background —Ä–∞–±–æ—Ç–∞
    return result;
}).thenAccept(result -> {
    // UI –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
}).exceptionally(error -> {
    // –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
    return null;
});

// –° –∫–æ–ª–ª–±—ç–∫–∞–º–∏
AsyncExecutor.executeIOTask(
    () -> computeResult(),  // Callable<T>
    result -> updateUI(result),  // OnResultCallback<T>
    error -> handleError(error)  // OnErrorCallback
);
```

## üîß **–¢–µ–∫—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å: AlarmReceiver.java**

### **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç AsyncTask:**
- –ü–æ–ª—É—á–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π URL —Å—Ç–∞–Ω—Ü–∏–∏ —á–µ—Ä–µ–∑ `Utils.getRealStationLink()`
- –ü–æ–≤—Ç–æ—Ä—è–µ—Ç –ø–æ–ø—ã—Ç–∫–∏ –¥–æ 20 —Ä–∞–∑ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 500–º—Å
- –í `onPostExecute`: –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∏–ª–∏ —Å–∏—Å—Ç–µ–º–Ω—ã–π –±—É–¥–∏–ª—å–Ω–∏–∫

### **–ú–∏–≥—Ä–∞—Ü–∏—è:**
```java
// –ë—ã–ª–æ
new AsyncTask<Void, Void, String>() {
    @Override
    protected String doInBackground(Void... params) {
        // IO –æ–ø–µ—Ä–∞—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è URL
        return Utils.getRealStationLink(httpClient, context, stationId);
    }
    @Override
    protected void onPostExecute(String result) {
        // UI –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
    }
}.execute();

// –°—Ç–∞–Ω–µ—Ç
AsyncExecutor.submitIOTask(() -> {
    // IO –æ–ø–µ—Ä–∞—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è URL
    return Utils.getRealStationLink(httpClient, context, stationId);
}).thenAccept(result -> {
    // UI –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ –≥–ª–∞–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ
    AsyncExecutor.runOnMainThread(() -> {
        // –∫–æ–¥ –∏–∑ onPostExecute
    });
}).exceptionally(error -> {
    // –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
    return null;
});
```

### **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
- ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π API (CompletableFuture)
- ‚úÖ –õ—É—á—à–µ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞–º–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ UI –∫–æ–¥–∞ –Ω–∞ –≥–ª–∞–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ
- ‚úÖ –õ—É—á—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –ë–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–π –∫–æ–¥

---

## üìà **–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏**
1. –ó–∞–≤–µ—Ä—à–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é AlarmReceiver.java
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –±—É–¥–∏–ª—å–Ω–∏–∫–∞
3. –ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ñ–∞–π–ª—É: StationActions.java
